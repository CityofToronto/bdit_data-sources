DROP TABLE IF EXISTS here.traffic_pattern_ref;
CREATE TABLE here.traffic_pattern_ref (
	link_pvid BIGINT NOT NULL,
	travel_direction char(1) NOT NULL,
	u INT NOT NULL,
	m INT NOT NULL,
	t INT NOT NULL,
	w INT NOT NULL,
	r INT NOT NULL,
	f INT NOT NULL,
	s INT NOT NULL
);
ALTER TABLE here.traffic_pattern_ref ADD PRIMARY KEY(link_pvid, travel_direction);
COMMENT ON TABLE here.traffic_pattern_ref IS 'Lookup table for traffic patterns';

CREATE TABLE here.traffic_pattern_spd_15 (
	pattern_id INT PRIMARY KEY,
	h00_00 INT NOT NULL,
	h00_15 INT NOT NULL,
	h00_30 INT NOT NULL,
	h00_45 INT NOT NULL,
	h01_00 INT NOT NULL,
	h01_15 INT NOT NULL,
	h01_30 INT NOT NULL,
	h01_45 INT NOT NULL,
	h02_00 INT NOT NULL,
	h02_15 INT NOT NULL,
	h02_30 INT NOT NULL,
	h02_45 INT NOT NULL,
	h03_00 INT NOT NULL,
	h03_15 INT NOT NULL,
	h03_30 INT NOT NULL,
	h03_45 INT NOT NULL,
	h04_00 INT NOT NULL,
	h04_15 INT NOT NULL,
	h04_30 INT NOT NULL,
	h04_45 INT NOT NULL,
	h05_00 INT NOT NULL,
	h05_15 INT NOT NULL,
	h05_30 INT NOT NULL,
	h05_45 INT NOT NULL,
	h06_00 INT NOT NULL,
	h06_15 INT NOT NULL,
	h06_30 INT NOT NULL,
	h06_45 INT NOT NULL,
	h07_00 INT NOT NULL,
	h07_15 INT NOT NULL,
	h07_30 INT NOT NULL,
	h07_45 INT NOT NULL,
	h08_00 INT NOT NULL,
	h08_15 INT NOT NULL,
	h08_30 INT NOT NULL,
	h08_45 INT NOT NULL,
	h09_00 INT NOT NULL,
	h09_15 INT NOT NULL,
	h09_30 INT NOT NULL,
	h09_45 INT NOT NULL,
	h10_00 INT NOT NULL,
	h10_15 INT NOT NULL,
	h10_30 INT NOT NULL,
	h10_45 INT NOT NULL,
	h11_00 INT NOT NULL,
	h11_15 INT NOT NULL,
	h11_30 INT NOT NULL,
	h11_45 INT NOT NULL,
	h12_00 INT NOT NULL,
	h12_15 INT NOT NULL,
	h12_30 INT NOT NULL,
	h12_45 INT NOT NULL,
	h13_00 INT NOT NULL,
	h13_15 INT NOT NULL,
	h13_30 INT NOT NULL,
	h13_45 INT NOT NULL,
	h14_00 INT NOT NULL,
	h14_15 INT NOT NULL,
	h14_30 INT NOT NULL,
	h14_45 INT NOT NULL,
	h15_00 INT NOT NULL,
	h15_15 INT NOT NULL,
	h15_30 INT NOT NULL,
	h15_45 INT NOT NULL,
	h16_00 INT NOT NULL,
	h16_15 INT NOT NULL,
	h16_30 INT NOT NULL,
	h16_45 INT NOT NULL,
	h17_00 INT NOT NULL,
	h17_15 INT NOT NULL,
	h17_30 INT NOT NULL,
	h17_45 INT NOT NULL,
	h18_00 INT NOT NULL,
	h18_15 INT NOT NULL,
	h18_30 INT NOT NULL,
	h18_45 INT NOT NULL,
	h19_00 INT NOT NULL,
	h19_15 INT NOT NULL,
	h19_30 INT NOT NULL,
	h19_45 INT NOT NULL,
	h20_00 INT NOT NULL,
	h20_15 INT NOT NULL,
	h20_30 INT NOT NULL,
	h20_45 INT NOT NULL,
	h21_00 INT NOT NULL,
	h21_15 INT NOT NULL,
	h21_30 INT NOT NULL,
	h21_45 INT NOT NULL,
	h22_00 INT NOT NULL,
	h22_15 INT NOT NULL,
	h22_30 INT NOT NULL,
	h22_45 INT NOT NULL,
	h23_00 INT NOT NULL,
	h23_15 INT NOT NULL,
	h23_30 INT NOT NULL,
	h23_45 INT NOT NULL
);
COMMENT ON TABLE here.traffic_pattern_spd_15 IS '15 minute speed model by pattern id';

CREATE TABLE here.traffic_pattern_spd_60 (
pattern_id INT PRIMARY KEY,
h00_00 INT NOT NULL,
h01_00 INT NOT NULL,
h02_00 INT NOT NULL,
h03_00 INT NOT NULL,
h04_00 INT NOT NULL,
h05_00 INT NOT NULL,
h06_00 INT NOT NULL,
h07_00 INT NOT NULL,
h08_00 INT NOT NULL,
h09_00 INT NOT NULL,
h10_00 INT NOT NULL,
h11_00 INT NOT NULL,
h12_00 INT NOT NULL,
h13_00 INT NOT NULL,
h14_00 INT NOT NULL,
h15_00 INT NOT NULL,
h16_00 INT NOT NULL,
h17_00 INT NOT NULL,
h18_00 INT NOT NULL,
h19_00 INT NOT NULL,
h20_00 INT NOT NULL,
h21_00 INT NOT NULL,
h22_00 INT NOT NULL,
h23_00 INT NOT NULL);
COMMENT ON TABLE here.traffic_pattern_spd_60 IS '60 minute speed model by pattern id';

CREATE TABLE here.traffic_pattern_holiday_15 (
holiday TEXT NOT NULL,
mnth smallINT NOT NULL,
min_day smallINT NOT NULL,
max_day smallINT NOT NULL,
day_of_week smallINT NOT NULL,
model TEXT NOT NULL, --Filename of model
dow_speed_pattern char(1)
);

CREATE TABLE here.traffic_pattern_holiday_60 (
holiday TEXT NOT NULL,
mnth smallINT NOT NULL,
min_day smallINT NOT NULL,
max_day smallINT NOT NULL,
day_of_week smallINT NOT NULL,
model TEXT NOT NULL, --Filename of model
dow_speed_pattern char(1)
);

